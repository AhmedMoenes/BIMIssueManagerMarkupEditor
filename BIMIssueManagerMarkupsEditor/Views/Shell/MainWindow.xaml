<Window x:Class="BIMIssueManagerMarkupsEditor.Views.Shell.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:hc="https://handyorg.github.io/handycontrol"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:BIMIssueManagerMarkupsEditor.Views.Shell"
        xmlns:converters="clr-namespace:BIMIssueManagerMarkupsEditor.Converters"
        mc:Ignorable="d"
        Title="BIM ISSUE MANAGER"
        Height="700" Width="1000"
        MinWidth="800" MinHeight="600"
        ResizeMode="CanResize"  WindowStartupLocation="CenterScreen">
    <Window.Resources>
        <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
    </Window.Resources>

    <DockPanel>
        <Border DockPanel.Dock="Top" 
                Background="DarkGray" 
                Padding="10">

            <Grid VerticalAlignment="Center">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <!-- Logo -->
                    <ColumnDefinition Width="*"/>
                    <!-- Spacer -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- User Info -->
                    <ColumnDefinition Width="Auto"/>
                    <!-- User Icon -->
                </Grid.ColumnDefinitions>

                <!-- Logo -->
                <Image Source="{Binding LogoIcon}" Height="42" Grid.Column="0" VerticalAlignment="Center"/>

                <!-- User Info -->
                <StackPanel Grid.Column="2" Orientation="Vertical" VerticalAlignment="Center">
                    <TextBlock Text="{Binding UserFullName}"
                               FontWeight="SemiBold"
                               Foreground="Black"
                               FontSize="16"/>
                    <TextBlock Text="{Binding UserCompany}"
                               Foreground="Black"
                               FontSize="12"/>
                </StackPanel>

                <!-- User Icon -->
                <Image Source="{Binding UserIcon}"
                       Grid.Column="3"
                       Height="32"
                       VerticalAlignment="Center"
                       Margin="10,0,0,0"/>
            </Grid>
        </Border>

        <hc:SideMenu DockPanel.Dock="Left"
                     Width="140"
                     Header="BIM Manager"
                     Background="#F9FBFC">

            <hc:SideMenuItem Header="Markup Editor" Command="{Binding NavigateMarkupCommand}">
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding MarkupIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Profile" Command="{Binding NavigateProfileCommand}">
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding ProfileIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Projects"
                             Command="{Binding NavigateProjectsCommand}">
                             Visibility="{Binding IsCompanyAdmin, Converter={StaticResource BoolToVisibilityConverter}}"
                <hc:SideMenuItem.Icon>
                    <Image Width="32" Height="32" Source="{Binding ProjectsIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Companies" Command="{Binding NavigateCompaniesCommand}">
                Visibility="{Binding IsCompanyAdmin, Converter={StaticResource BoolToVisibilityConverter}}">>
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding CompanyIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Teams"
                             Command="{Binding NavigateTeamsCommand}">
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding TeamsIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Issues" 
                             Command="{Binding NavigateIssuesCommand}">
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding IssuesIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Chat" 
                             Command="{Binding NavigateChatCommand}">
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding ChatIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>

            <hc:SideMenuItem Header="Viewer" 
                             Command="{Binding NavigateViewerCommand}">
                <hc:SideMenuItem.Icon>
                    <Image Width="36" Height="36" Source="{Binding ViewerIcon}" />
                </hc:SideMenuItem.Icon>
            </hc:SideMenuItem>
        </hc:SideMenu>

        <ContentControl Content="{Binding CurrentView}" Margin="10,1,10,10" />
    </DockPanel>
</Window>
